<div>
  <div class="container">
    <p ng-model="view.searchText"></p>
    <div ng-model='post' ng-repeat="post in view.posts track by $index"
    class="panel panel-default row col-md-12">
    <p class='hidden' ng-model='newComment.post_id'>{{post.id}}</p>
    <a href="#" class="thumbnail col-md-3">
      <img ng-src="{{post.image_url}}" alt="hg">
    </a>
    <div class="col-md-9">
      <p class="text-right">by: {{post.username}}</p>
      <span><h4>{{post.title}} | <span ng-class="voteClass(post)">votes: {{post.votes}}</span>
        <span ng-click="changeVotes(post,1)"><i class="fa fa-arrow-up" aria-hidden="true"></i></span>
        <span ng-click="changeVotes(post,-1)"><i class="fa fa-arrow-down" aria-hidden="true"></i></span>
      </h4</span>
      <p>{{post.description}}</p>
      <!-- <mb-comment></mb-comment> -->
      <article class="comments">
        <h5>COMMENTS |
          <span ng-click="toggleComments()">
              <i class="fa fa-comments" aria-hidden="true"></i>
          </span> |
          <!-- Comment modal trigger -->
          <span data-toggle="modal" data-target="#commentModal_{{post.id}}">
          <i class="fa fa-pencil" aria-hidden="true"></i>
          </span>
        </h5>

        <div id="commentModal_{{post.id}}"
             class="modal fade bs-example-modal-md"
             tabindex="-1"
             post-id="{{post.id}}"
             role="dialog"
             aria-labelledby="myMedModalLabel">
          <div class="modal-dialog modal-md">
            <div class="modal-content col-md-8">
              <h3 class="text-center">NEW COMMENT</h3>

              <form class="form-group text-center" novalidate name="commentForm"
                    ng-submit="submitComment(post, newComment, commentForm)">

                <!-- <div class="form-group">
                  <label>Author</label><br>
                  <input type="text"
                         id="author"
                         name="author"
                         ng-model="newComment.author"
                         minlength=3
                         maxlength=20
                         ng-class="{'has-error': checkForError(commentForm.author),
                                    'has-success': commentForm.author.$valid }"
                         required>
                  <p ng-show="checkForError(commentForm.author)"
                     class="help-block">What's YOUR name?</p>
                </div> -->

              <div class="form-group">
                <label>Comment</label><br>
                <textarea type="textgroup"
                          id="comment"
                          name="comment"
                          ng-model="newComment.comment"
                          ng-class= "{'has-error': checkForError(commentForm.comment),
                                     'has-success': commentForm.comment.$valid}"
                          required>
                </textarea>
                <p ng-show="checkForError(commentForm.comment)"
                   class="help-block">What's your point?</p>
              </div>

              <div class="form-group">
                <button type="submit">Submit</button>
              </div>

              </form>
            </div>

          </div>
        </div>
        <div ng-show="post.showComments" class="fade">
          <div ng-repeat="comment in post.comments">
            <h5>{{comment.user_id}}</h5>
            <small><p>{{comment.comment}}</p></small>
          </div>
        </div>
      </article>
    </div>
  </div>
  <div id="postModal" class="modal fade bs-example-modal-md" tabindex="-1" role="dialog" aria-labelledby="myMedModalLabel">
    <div class="modal-dialog modal-md">
      <div class="modal-content  col-md-10">
        <h3 class="text-center">New Post</h3>

        <form class="form-group" name="postForm" action="#" class="text-center">

          <label for="title">Title</label>
          <input type="text" class="form-control" ng-class="{'has-error': checkForError(postForm.title), 'has-success': postForm.title.$valid}" id="title" name="title" ng-model="newPost.title" ng-minlength=3 ng-maxlength=20 required>
          <p ng-show="checkForError(postForm.title)" class="help-block">You fergot yer title</p>

          <label for="image">Image URL</label>
          <input type="text" class="form-control" ng-class="{'has-error': checkForError(postForm.image), 'has-success': postForm.image.$valid }" id="image" name="image" ng-model="newPost.image_url" required>
          <p ng-show="checkForError(postForm.image)" class="help-block">Better put in a perdy little picture</p>
          <label for="message">Message</label>
          <textarea type="text" class="form-control" ng-class="{'has-error': checkForError(postForm.message), 'has-success': postForm.message.$valid }" id="message" name="message" ng-model="newPost.description" required></textarea>
          <p ng-show="checkForError(postForm.message)" class="help-block">You're being stingy with the details</p>

          <button ng-click="submitPost()"class="btn btn-default">Submit</button>
        </form>
      </div>
    </div>
  </div>
</div>



</div>
